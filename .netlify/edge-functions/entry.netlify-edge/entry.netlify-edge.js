import{getNotFound as se}from"./@qwik-city-not-found-paths.js";import{isStaticPath as oe}from"./@qwik-city-static-paths.js";import{_ as le,a as ce,v as fe}from"./assets/index.qwik-7b47eba7.js";import{s as ue,r as de,m as he}from"./assets/entry.ssr-bd310598.js";import pe from"./@qwik-city-plan.js";var G=class extends Error{constructor(e,t){super(t),this.status=e}};function me(e,t){let r="Server Error";return t!=null&&(typeof t.message=="string"?r=t.message:r=String(t)),"<html>"+X(e,r)+"</html>"}function X(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=ge(t):t="";const r=typeof t=="string"?"600px":"300px",n=e>=500?be:we;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${n}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${r}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${n}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${n}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
`}var ye=/[&<>]/g,ge=e=>e.replace(ye,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),we="#006ce9",be="#713fc2",Se={lax:"Lax",none:"None",strict:"Strict"},xe={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},Re=(e,t,r)=>{const n=[`${e}=${t}`];typeof r.domain=="string"&&n.push(`Domain=${r.domain}`),typeof r.maxAge=="number"?n.push(`Max-Age=${r.maxAge}`):Array.isArray(r.maxAge)?n.push(`Max-Age=${r.maxAge[0]*xe[r.maxAge[1]]}`):typeof r.expires=="number"||typeof r.expires=="string"?n.push(`Expires=${r.expires}`):r.expires instanceof Date&&n.push(`Expires=${r.expires.toUTCString()}`),r.httpOnly&&n.push("HttpOnly"),typeof r.path=="string"&&n.push(`Path=${r.path}`);const a=_e(r.sameSite);return a&&n.push(`SameSite=${a}`),r.secure&&n.push("Secure"),n.join("; ")},ke=e=>{const t={};if(typeof e=="string"&&e!==""){const r=e.split(";");for(const n of r){const a=n.indexOf("=");a!==-1&&(t[decodeURIComponent(n.slice(0,a).trim())]=decodeURIComponent(n.slice(a+1).trim()))}}return t};function _e(e){if(e===!0)return"Strict";if(e===!1)return"None";if(e)return Se[e]}var k=Symbol("request-cookies"),H=Symbol("response-cookies"),S=Symbol("live-cookies"),Y,V,Ae=class{constructor(e){this[Y]={},this[V]={},this[k]=ke(e),this[S]={...this[k]}}get(e,t=!0){const r=this[t?S:k][e];return r?{value:r,json(){return JSON.parse(r)},number(){return Number(r)}}:null}getAll(e=!0){return Object.keys(this[e?S:k]).reduce((t,r)=>(t[r]=this.get(r),t),{})}has(e,t=!0){return!!this[t?S:k][e]}set(e,t,r={}){this[S][e]=typeof t=="string"?t:JSON.stringify(t);const n=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[H][e]=Re(e,n,r)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0}),this[S][e]=null}headers(){return Object.values(this[H])}};Y=H,V=S;var Te=(e,t)=>{const r=t.headers();if(r.length>0){const n=new Headers(e);for(const a of r)n.append("Set-Cookie",a);return n}return e},D=class{},P=class extends D{},Q=new WeakMap,N="qaction",ve="qfunc";function De(e){const{url:t,params:r,request:n,status:a,locale:o}=e,s={};n.headers.forEach((c,d)=>s[d]=c);const i=e.sharedMap.get(C),u=e.sharedMap.get(ne),l=e.sharedMap.get(Qe);return{url:new URL(t.pathname+t.search,t).href,requestHeaders:s,locale:o(),nonce:l,qwikcity:{ev:e,params:{...r},loadedRoute:Ue(e),response:{status:a(),loaders:$(e),action:i,formData:u}}}}var Pe=(e,t,r,n)=>{const a=[],o=[],s=[],i=!!(t&&$e(t[1]));return e&&U(a,o,s,e,i,r),t&&(i&&(r==="POST"&&(s.unshift(Le),s.push(Me)),s.push(Oe),s.push(Ie)),U(a,o,s,t[1],i,r),i&&(a.length+F.length>0&&s.push(F(a,o)),s.push(n))),s},U=(e,t,r,n,a,o)=>{for(const s of n){typeof s.onRequest=="function"?r.push(s.onRequest):Array.isArray(s.onRequest)&&r.push(...s.onRequest);let i;switch(o){case"GET":{i=s.onGet;break}case"POST":{i=s.onPost;break}case"PUT":{i=s.onPut;break}case"PATCH":{i=s.onPatch;break}case"DELETE":{i=s.onDelete;break}case"OPTIONS":{i=s.onOptions;break}case"HEAD":{i=s.onHead;break}}if(typeof i=="function"?r.push(i):Array.isArray(i)&&r.push(...i),a){const u=Object.values(s).filter(c=>q(c,"server_loader"));e.push(...u);const l=Object.values(s).filter(c=>q(c,"server_action"));t.push(...l)}}},q=(e,t)=>e&&typeof e=="function"&&e.__brand===t;function F(e,t){return async r=>{if(r.headersSent){r.exit();return}const{method:n}=r,a=$(r),o=_(r)==="dev",s=r[O];if(o&&n==="GET"&&r.query.has(N)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request.
Make sure you <form> has method="POST" attribute, like this: <form method="POST">`),n==="POST"){const i=r.query.get(N);if(i){const u=globalThis._qwikActionsMap,l=t.find(c=>c.__id===i)??(u==null?void 0:u.get(i));if(l){r.sharedMap.set(C,i);const c=await r.parseBody();if(!c||typeof c!="object")throw new Error("Expected request data to be an object");const d=await B(r,l.__validators,c);if(!d.success)a[i]=r.fail(d.status??500,d.error);else{const m=await l.__qrl(d.data,r);o&&W(s,m,l.__qrl),a[i]=m}}}}e.length>0&&await Promise.all(e.map(i=>{const u=i.__id;if(o&&a[u])throw new Error(`Duplicate loader id "${u}" detected. Please ensure that all loader ids are unique.`);return a[u]=B(r,i.__validators,void 0).then(l=>l.success?i.__qrl(r):r.fail(l.status??500,l.error)).then(l=>(typeof l=="function"?a[u]=l():(o&&W(s,l,i.__qrl),a[u]=l),l))}))}}async function B(e,t,r){let n={success:!0,data:r};if(t)for(const a of t)if(n=await a.validate(e,r),n.success)r=n.data;else return n;return n}function We(e){return e&&typeof e=="object"&&Symbol.asyncIterator in e}async function Me(e){const t=e.query.get(ve);if(t&&e.request.headers.get("X-QRL")===t&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const r=_(e)==="dev",n=e[O],a=await e.parseBody();if(Array.isArray(a)){const[o,...s]=a;if(Ce(o)&&o.getHash()===t){let i;try{i=await o.apply(e,s)}catch(u){e.headers.set("Content-Type","application/qwik-json"),e.send(500,await n._serializeData(u,!0));return}if(We(i)){e.headers.set("Content-Type","text/event-stream");const u=e.getWritableStream().getWriter();for await(const l of i){r&&W(n,l,o),e.headers.set("Content-Type","application/qwik-json");const c=await n._serializeData(l,!0);u.write(M.encode(`event: qwik
data: ${c}

`))}u.close()}else{W(n,i,o),e.headers.set("Content-Type","application/qwik-json");const u=await n._serializeData(i,!0);e.send(200,u)}return}}throw e.error(500,"Invalid request")}}function Oe(e){const t=I(e),{basePathname:r,pathname:n,url:a}=e;if(!ae(n)&&n!==r&&!n.endsWith(".html")){if(t){if(!n.endsWith("/"))throw e.redirect(302,n+"/"+a.search)}else if(n.endsWith("/"))throw e.redirect(302,n.slice(0,n.length-1)+a.search)}}function W(e,t,r){try{e._verifySerializable(t,void 0)}catch(n){throw n instanceof Error&&r.dev&&(n.loc=r.dev),n}}var Ce=e=>typeof e=="function"&&typeof e.getSymbol=="function";function $e(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function Z(e,t){return e.pathname.endsWith(x)?e.pathname.slice(0,-x.length+(t?1:0))+e.search:e.pathname}var M=new TextEncoder;function Le(e){const t=_(e)==="dev";let r=e.request.headers.get("origin"),n=e.url.origin;if(t&&(r=r?new URL(r).host:null,n=e.url.host),r!==n)throw e.error(403,`Cross-site ${e.request.method} form submissions are forbidden`)}function He(e){return async t=>{if(t.headersSent||t.pathname.endsWith(x))return;t.request.headers.forEach((d,m)=>d);const n=t.headers;n.has("Content-Type")||n.set("Content-Type","text/html; charset=utf-8");const a=I(t),{readable:o,writable:s}=new TextEncoderStream,i=t.getWritableStream(),u=o.pipeTo(i,{preventClose:!0}),l=s.getWriter(),c=t.status();try{const d=_(t)==="static",m=await e({base:t.basePathname+"build/",stream:l,serverData:De(t),containerAttributes:{["q:render"]:d?"static":""}}),p={loaders:$(t),action:t.sharedMap.get(C),status:c!==200?c:200,href:Z(t.url,a)};(typeof m).html==="string"&&await l.write(m.html),t.sharedMap.set("qData",p)}finally{await l.ready,await l.close(),await u}await i.close()}}async function Ie(e){if(ae(e.pathname)){try{await e.next()}catch(c){if(!(c instanceof P))throw c}if(e.headersSent||e.exited)return;const r=e.status(),n=e.headers.get("Location"),a=I(e);if(r>=301&&r<=308&&n){const c=je(n);if(c){e.headers.set("Location",c),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}e.request.headers.forEach((c,d)=>c),e.headers.set("Content-Type","application/json; charset=utf-8");const s={loaders:$(e),action:e.sharedMap.get(C),status:r!==200?r:200,href:Z(e.url,a),redirect:n??void 0},i=e.getWritableStream().getWriter(),l=await e[O]._serializeData(s,!0);i.write(M.encode(l)),e.sharedMap.set("qData",s),i.close()}}function je(e){if(e.startsWith("/")){const t=x,r=new URL(e,"http://localhost");return(r.pathname.endsWith("/")?r.pathname.slice(0,-1):r.pathname)+(t.startsWith("/")?"":"/")+t+r.search}else return}function ze(e){const t=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),t.join(", ")}var E=Symbol("RequestEvLoaders"),ee=Symbol("RequestEvMode"),te=Symbol("RequestEvRoute"),O=Symbol("RequestEvQwikSerializer"),re=Symbol("RequestEvTrailingSlash"),C="@actionId",ne="@actionFormData",Qe="@nonce";function Ne(e,t,r,n=!0,a="/",o,s){const{request:i,platform:u,env:l}=e,c=new Ae(i.headers.get("cookie")),d=new Headers,m=new URL(i.url);let p=-1,y=null,w,j=e.locale,g=200;const ie=async()=>{for(p++;p<r.length;){const f=r[p],h=f(b);h instanceof Promise&&await h,p++}},R=()=>{if(y!==null)throw new Error("Response already sent")},A=(f,h)=>{if(R(),typeof f=="number"){g=f;const v=b.getWritableStream().getWriter();v.write(typeof h=="string"?M.encode(h):h),v.close()}else if(g=f.status,f.headers.forEach((T,v)=>{d.append(v,T)}),f.body){const T=b.getWritableStream();f.body.pipeTo(T)}else{if(g>=300&&g<400)return new P;b.getWritableStream().getWriter().close()}return new D},L={},z=new Map,b={[E]:L,[ee]:e.mode,[re]:n,[te]:t,[O]:o,cookie:c,headers:d,env:l,method:i.method,params:(t==null?void 0:t[0])??{},pathname:m.pathname,platform:u,query:m.searchParams,request:i,url:m,basePathname:a,sharedMap:z,get headersSent(){return y!==null},get exited(){return p>=J},next:ie,exit:()=>(p=J,new D),cacheControl:f=>{R(),d.set("Cache-Control",ze(f))},resolveValue:async f=>{const h=f.__id;if(f.__brand==="server_loader"&&!(h in L))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return L[h]},status:f=>typeof f=="number"?(R(),g=f,f):g,locale:f=>(typeof f=="string"&&(j=f),j||""),error:(f,h)=>(g=f,d.delete("Cache-Control"),new G(f,h)),redirect:(f,h)=>(R(),g=f,d.set("Location",h),d.delete("Cache-Control"),f>301&&d.set("Cache-Control","no-store"),new P),defer:f=>typeof f=="function"?f:()=>f,fail:(f,h)=>(R(),g=f,d.delete("Cache-Control"),{failed:!0,...h}),text:(f,h)=>(d.set("Content-Type","text/plain; charset=utf-8"),A(f,h)),html:(f,h)=>(d.set("Content-Type","text/html; charset=utf-8"),A(f,h)),parseBody:async()=>w!==void 0?w:w=qe(b.request,z,o),json:(f,h)=>(d.set("Content-Type","application/json; charset=utf-8"),A(f,JSON.stringify(h))),send:A,isDirty:()=>y!==null,getWritableStream:()=>(y===null&&(y=e.getWritableStream(g,d,c,s,b)),y)};return Object.freeze(b)}function $(e){return e[E]}function I(e){return e[re]}function Ue(e){return e[te]}function _(e){return e[ee]}var J=999999999,qe=async(e,t,r)=>{var n;const a=e.clone(),o=((n=e.headers.get("content-type"))==null?void 0:n.split(/[;,]/,1)[0].trim())??"";if(o==="application/x-www-form-urlencoded"||o==="multipart/form-data"){const s=await a.formData();return t.set(ne,s),Fe(s)}else{if(o==="application/json")return await a.json();if(o==="application/qwik-json")return r._deserializeData(await a.text())}},Fe=e=>{const t={};return e.forEach((r,n)=>{const a=n.split(".").filter(s=>s);let o=t;for(let s=0;s<a.length;s++){let i=a[s];s===a.length-1?i.endsWith("[]")?(i=i.slice(0,-2),o[i]=o[i]||[],o[i].push(r)):o[i]=r:o=o[i]={...o[i]}}}),t};function Be(e,t,r,n=!0,a="/",o){let s;const i=new Promise(l=>s=l),u=Ne(e,t,r,n,a,o,s);return{response:i,requestEv:u,completion:Je(u,s)}}async function Je(e,t){try{await e.next()}catch(r){if(r instanceof P)await e.getWritableStream().close();else if(r instanceof G){if(console.error(r),!e.headersSent){const n=me(r.status,r);e.html(r.status,n)}}else if(!(r instanceof D)){if(_(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const n=e.getWritableStream();if(!n.locked){const a=n.getWriter();await a.write(M.encode(X(500,"Internal Server Error"))),await a.close()}}catch{console.error("Unable to render error page")}return r}}finally{e.isDirty()||t(null)}}function Ke(e,t){if(e.endsWith(x)){const r=e.length-Ge+(t?1:0);e=e.slice(0,r),e===""&&(e="/")}return e}var ae=e=>e.endsWith(x),x="/q-data.json",Ge=x.length,Xe=async(e,t,r,n)=>{if(Array.isArray(e))for(const a of e){const o=a[0].exec(n);if(o){const s=a[1],i=Ve(a[2],o),u=a[4],l=new Array(s.length),c=[],d=Ye(t,n);let m;return s.forEach((p,y)=>{K(p,c,w=>l[y]=w,r)}),K(d,c,p=>m=p==null?void 0:p.default,r),c.length>0&&await Promise.all(c),[i,l,m,u]}}return null},K=(e,t,r,n)=>{if(typeof e=="function"){const a=Q.get(e);if(a)r(a);else{const o=e();typeof o.then=="function"?t.push(o.then(s=>{n!==!1&&Q.set(e,s),r(s)})):o&&r(o)}}},Ye=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const r=e.find(n=>n[0]===t||t.startsWith(n[0]+(t.endsWith("/")?"":"/")));if(r)return r[1]}},Ve=(e,t)=>{const r={};if(e)for(let n=0;n<e.length;n++){const a=(t==null?void 0:t[n+1])??"",o=a.endsWith("/")?a.slice(0,-1):a;r[e[n]]=decodeURIComponent(o)}return r};async function Ze(e,t,r){const{render:n,qwikCityPlan:a}=t,{routes:o,serverPlugins:s,menus:i,cacheModules:u,trailingSlash:l,basePathname:c}=a,d=e.url.pathname,m=Ke(d,l),p=await Ee(s,o,i,u,m,e.request.method,n);return p?Be(e,p[0],p[1],l,c,r):null}async function Ee(e,t,r,n,a,o,s){const i=await Xe(t,r,n,a),u=Pe(e,i,o,He(s));return u.length>0?[i,u]:null}function et(e){const t={_deserializeData:le,_serializeData:ce,_verifySerializable:fe};e.manifest&&ue(e.manifest);async function r(n,a){try{const o=new URL(n.url);if(oe(n.method,o)||o.pathname.startsWith("/.netlify"))return a.next();const s={mode:"server",locale:void 0,url:o,env:Deno.env,request:n,getWritableStream:(l,c,d,m)=>{const{readable:p,writable:y}=new TransformStream,w=new Response(p,{status:l,headers:Te(c,d)});return m(w),y},platform:a},i=await Ze(s,e,t);if(i){i.completion.then(c=>{c&&console.error(c)});const l=await i.response;if(l)return l}const u=se(o.pathname);return new Response(u,{status:404,headers:{"Content-Type":"text/html; charset=utf-8","X-Not-Found":o.pathname}})}catch(o){return console.error(o),new Response(String(o||"Error"),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8","X-Error":"netlify-edge"}})}}return r}const st=et({render:de,qwikCityPlan:pe,manifest:he});export{st as default};
